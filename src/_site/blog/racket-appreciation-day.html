<!doctype html><html lang="en"><head><meta http-equiv="Content-type" content="text/html;charset=UTF-8"><meta name="Viewport" content="width=device-width,initial-scale=1,maximum-scale=1.0"><meta name="Description" content="Homepage of Richard Wossal. Weeks of hacking can save you hours of planning."><title>Racket Appreciation Day | r-wos.org</title> <style>
    * { line-height: 140%; }
    body { margin:15px auto; max-width:40em; padding: 0 1em; }
    body { background: lightcyan; }
    nav, main, aside { background: white; border: 4px ridge black; padding: 8px 1em; margin: 8px 0; }
    nav { background: lightyellow; }
    h1 { text-align: center; color: rebeccapurple; }
    time { background: yellow }
    @-moz-keyframes blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@-webkit-keyframes blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@-o-keyframes blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@keyframes blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}blink{display:inline;-webkit-animation:blink 1s steps(1) infinite;-moz-animation:blink 1s steps(1) infinite;-o-animation:blink 1s steps(1) infinite;animation:blink 1s steps(1) infinite}

    </style></head><body> <nav> <img style="vertical-align:middle" src="/media/disk.gif"> <a href="/">Home</a> - <a href="/blog">Blog</a> - <a href="/feed.xml">RSS</a> - <a href="/hacks">Hacks</a> - <a href="/about">About</a> </nav> <main><h1>Racket Appreciation Day</h1><p><b><time datetime="2013-07-23">2013-07-23</time></b></p><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> #lang racket
 (require net/url)
 (port-&gt;string
   (get-pure-port
     (string-&gt;url "http://r-wos.org")))
</code></pre></div></div><p>Racket Appreciation Day was today, for me. I tried writing a small script that reads from Github’s API and displays a list of “@mentions” in <a href="http://www.gnu.org/software/guile/">Guile</a>.</p><p><small> (Why Guile? Well, the short version of the story is that I’d like to run this program on my <a href="http://en.qi-hardware.com/wiki/Ben_NanoNote">Ben NanoNote</a> since I have that machine lying around for quite some time now, looking for something, <em>anything</em> to use it for.</small></p><p>The NanoNote comes with Guile. It also comes with Python, Bash, GForth and Lua, and I could probably cross-compile Racket for it (it’s a MIPS CPU), but yeah - I thought writing something in Guile would be interesting.) &lt;/small&gt;</p><p>And Guile <em>is</em> quite nice, as a language - but some things still made me miss <a href="http://racket-lang.org">Racket</a>.</p><p>Examples are: local <code class="highlighter-rouge">define</code>s, <code class="highlighter-rouge">let-values</code>, <code class="highlighter-rouge">port-&gt;string</code>, Racket’s <code class="highlighter-rouge">for</code> loop forms, and the quality of the documentation: Guile’s docs don’t include the return value in the function signature - you have to parse the prose around it for that information. Not nice.</p><p>But what triggered this post is Guile’s absolutely <em>stupid</em> HTTP client. It’s reasonably easy to use, and generally works, except that it <em>verifies</em> the response headers.</p><p>What the fuck?! Since when are the receiving ends of clients in a network supposed to play the RFC-Nazi role? Or the receiving end of anything, really: “Be conservative in what you send, be liberal in what you accept”, isn’t that the networking credo?</p><p>Well, not so with Guile’s HTTP client. This one throws a <code class="highlighter-rouge">Bad Header</code> exception and trashes the response if the server decided to send something that isn’t part of some RFC. And, as if that wasn’t bad enough, it also throws for basically everything with a <code class="highlighter-rouge">Content-Location</code> header. As an example, it refuses to accept the response you’ll get after requesting <a href="http://r-wos.org">http://r-wos.org</a>.</p><p>Okay, so now I have two options. Either I write my own <code class="highlighter-rouge">http-get</code> - which means basically writing in C, except slower, and with more parentheses. Or I use <code class="highlighter-rouge">(system "curl ...")</code>. Not nice, part two.</p><p>So here’s my tip of the day: use Racket if you can.</p><p>And just use Python or something, if you can’t.</p><hr><h2>See Also</h2><p>Previously: <a href="/blog/wtf-js">wtf.js</a></p><p>Next up: <a href="/blog/owncloud">ownCloud</a></p><p> The machine thinks that the Web-Log entries <a href="/blog/racket-appreciation-day">Racket Appreciation Day</a>, <a href="/blog/ludum-dare-26-postmortem">26th Ludum Dare - Postmortem</a>, and <a href="/blog/purely-functional-games">Purely Functional Games</a> might be related to the topic so eloquently discussed above. The machine is sometimes right.</p></main></body></html>