<!doctype html>
<html lang="en">
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <meta name="Viewport" content="width=device-width,initial-scale=1,maximum-scale=1.0">
    <meta name="Description" content="Homepage of Richard Wossal. Weeks of hacking can save you hours of planning.">
    <title>ownCloud | r-wos.org</title>
    <style>

.terminal .clipboard {
 position:absolute;
 bottom:0;
 left:0;
 opacity:0.01;
 filter:alpha(opacity = 0.01);
 filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0.01);
 width:2px;
}
.cmd > .clipboard {
 position:fixed;
}
.terminal {
 padding:10px;
 position:relative;
 overflow:hidden;
}
.cmd {
 padding:0;
 margin:0;
 height:1.3em;
}
.terminal .terminal-output div div,
.terminal .prompt {
 display:block;
 line-height:14px;
 height:16px;
}
.terminal {
 font-family:FreeMono,monospace;
 color:#33dd33;
 background-color:#000f00;
 font-size:14px;
 line-height:16px;
}
.terminal .terminal-output div span {
 display:inline-block;
}
.terminal .cmd span {
 display:inline-block;
}
.terminal .cmd span.inverted {
 background-color:#33dd33;
 color:#000f00;
}
.terminal .terminal-output div div::-moz-selection,
.terminal .terminal-output div span::-moz-selection {
 background-color:#33dd33;
 color:#000f00;
}
.terminal .terminal-output div div::selection,
.terminal .terminal-output div span::selection,
.terminal .cmd > span::selection,
.terminal .prompt span::selection {
 background-color:#33dd33;
 color:#000f00;
}
.terminal .terminal-output div.error,
.terminal .terminal-output div.error div {
 color:#33dd33;
}
.tilda {
 position:fixed;
 top:0;
 left:0;
 width:100%;
 z-index:1100;
}
.clear {
 clear:both;
}
.terminal a {
 color:#ccff66;
}
.terminal a:hover {
 color:#ccff66;
}
body {
 font-family:Helvetica,Arial,sans-serif;
 font-size:11pt;
 line-height:1.5em;
 padding:0.5em;
 margin:0em;
 color:#33dd33;
 background-color:#000f00;
}
main {
 max-width:50em;
 margin-left:auto;
 margin-right:auto;
}
#footer,
#footer * {
 text-align:center;
 font-size:9pt;
 color:#226622;
}
#footer > a {
 color:#226622;
 text-decoration:underline;
}
h1,
h2,
h3,
h4 {
 color:#66ff66;
 line-height:1em;
 text-align:center !important;
 font-family:Georgia,serif;
 font-weight:normal;
}
a {
 color:#ccff66;
 text-decoration:none;
}
a img {
 display:inline-block;
 border:none;
}
a:hover {
 color:#000f00 ! important;
 background-color:#ffff00;
 border-radius:5px 5px 5px 5px;
 box-shadow:0px 0px 5px 4px #ffff00;
}
a:visited {
 color:#aaaa00;
}
nav {
 font-size:10pt;
 text-align:center;
}
.header {
 text-align:center !important;
}
h1 {
 font-size:16pt;
 border-top:1pt solid #66aa66;
 padding-top:0.25em;
 margin-top:1em;
 display:inline-block;
}
hr {
 border-style:none;
 width:50%;
 height:0pt;
 border-top:2pt solid #339933;
}
dl {
 display:inline-block;
}
dt {
 padding-top:1em;
 font-size:90%;
}
dt:first-letter {
 font-size:110%;
}
dd {
 padding-left:0.5em;
}
dd .descr {
 margin:0pt;
 margin-left:3em;
 margin-bottom:0.5em;
 padding 0pt;
}
.block {
 margin:1em;
 padding:4em;
 padding-top:1.5em;
 padding-bottom:2em;
 border-top:2pt solid #339933;
 border-bottom:2pt solid #339933;
 border-radius:2em;
 text-align:center;
}
.block * {
 text-align:left;
}
input[type=text],
textarea {
 color:#33dd33;
 background-color:#003f00;
 border:2pt solid #003f00;
 border-radius:0.25em;
}
input[type=text]:focus,
textarea:focus {
 border-top:2pt solid #339933;
 border-bottom:2pt solid #339933;
}
input[type=button],
input[type=submit] {
 color:#33dd33;
 background-color:#003f00;
 border-radius:0.25em;
 border:2pt solid #339933;
}
input[type=button]:hover,
input[type=submit]:hover {
 color:#000f00;
 background-color:#ffff00;
 border:2pt solid #ffff00;
 box-shadow:0px 0px 5px 4px #ffff00;
}
.nav-prev {
 float:left;
 font-size:small;
}
.nav-next {
 float:right;
 font-size:small;
}
@media (max-width:500px) {
 .block {
  padding-left:0em;
  padding-right:0em;
 }
 .nav-prev,
 .nav-next {
  float:none;
 }
}
 
 
    </style>
  </head>
  <body>
    <nav>
      <img style="vertical-align: middle" src="/media/disk.gif">
      <a href="/">Home</a> -
      <a href="/blog/">Blog</a> -
      <a href="/feed.xml">RSS</a> -
      <a href="/hacks/">Hacks</a> -
      <a href="/about">About</a>
    </nav>
    <main>
      <h1>ownCloud</h1>
      <p><b><time datetime="2013-09-14 00:00:00 &#43;0000 &#43;0000">2013-09-14 00:00:00 &#43;0000 &#43;0000</time></b></p>
      <p>So I looked at <a href="http://owncloud.org/">ownCloud</a> this week.</p>
<p>The install was pretty much hassle-free, as you would expect from a PHP
application. And the web frontend is pretty nice (though extremely slow, at
least on my AMD Sempron server). There's a photo gallery, and direct media
streaming, and zip downloads, and generally a lot of good stuff in there. The
feed reader (in &quot;Apps&quot;, not enabled by default) works quite well, and you can
get Android apps to sync your contacts and so on. The Linux sync client is a
bit of a PITA, since the whole thing locks up if you cancel an in-progress
sync. But you can define arbitrary remote-directory to local-directory mappings so
that's pretty nice.</p>
<p>So it's all fun and games and works well enough - but then there's the whole
security issue, the &quot;escape from the NSA&quot; thing. And that's where things start
to fall apart.</p>
<h2 id="useless-encryption">useless encryption</h2>
<p>OwnCloud does have an &quot;encryption&quot; option (in &quot;Apps&quot;, not enabled by default)
but it's utterly useless.</p>
<p>The only scenario where the built-in encryption helps a little bit is when
someone gets direct access to your data directory, <em>without</em> directly breaking
into the server. (The standard ownCloud install puts your data directory
under the www root, so this can actually happen if you're not careful).</p>
<p>If you have encryption enabled, the bad guys won't be able to get the actual
contents of your files. They will, however, be able to see the file size
and file names. Good luck explaining to the NSA that the 450KB file named
<code>leaks/nsa/prism-presentation.pdf</code> actually contains only a picture of
a penguin.</p>
<p>So there's that - and there's the other thing that with ownCloud you have to
<em>absolutely</em> trust your system administrator. An evil system administrator
could easily record your password when you log in and then go on and decrypt
all of your data.</p>
<p>Now, who's &quot;your system administrator&quot;? If you rented a server, VPS, or
shared hosting account it's you and your hosting provider. If you rented
space from an ownCloud provider, it's them and their hosting provider.
If the server is located in the USA or UK this also includes the NSA/GCHQ. In
most countries the police can seize your server, so include them too. Plus the
people at the data center.</p>
<p>Note that even encrypting your whole hard drive wouldn't help here
because the other side has physical access to the running system.</p>
<p>So it's <em>not</em> NSA-proof, not by a long shot. And that's not even a bug
that could be fixed: the only way to securely store data on a server
is to decrypt <em>only</em> on the client-side (given you trust the client).</p>
<p>Something like OwnCloud could, theoretically, do that by implementing encryption
and decryption in JavaScript - so that only encrypted data ever hits the server.
This would obviously slow down the whole thing a lot and (probably) make
media streaming too slow to be practical. But at least for contacts and the
calender this could work.</p>
<p>But that's all theory because ownCloud doesn't do any of that and just assumes
you can trust the server since it's &quot;yours&quot; (as in &quot;you rented it&quot;). An
assumption that's getting less and less valid, lately.</p>
<h2 id="as-secure-as-wordpress">as secure as wordpress</h2>
<p>OwnCloud has a built-in updater, and a built-in &quot;app store&quot; for extensions.  It
also had <a href="http://owncloud.org/about/security/advisories/">multiple XSS, SQL-injection, and code execution
vulnerabilities</a>, which, quite
frankly, means that they did't follow modern software engineering practices.</p>
<p>Being open to CSRF attacks (which it was, too) is <em>kind of</em> excusable - most
PHP web frameworks don't help you with that by default. But there is no excuse
for SQL-injection or arbitrary code execution in a modern PHP app - other than
&quot;they don't know what they are doing&quot;.</p>
<p>Just to mention it explicitly: in the case of an exploitable security hole <em>in
ownCloud itself</em>, the list of people you implicitly trust with all your data
automatically grows to &quot;the whole internet&quot;. That's the magic of the cloud! :-)</p>
<h2 id="as-secure-as-wordpress-part-2">as secure as wordpress, part 2</h2>
<p>So, you could, in theory, audit the code. But there's the next problem: this
thing is <em>big</em>. Big parts of the code are more-or-less well known pieces of software,
like the <a href="https://en.wikipedia.org/wiki/SabreDAV">SabreDAV server</a>, but still.</p>
<p>See how that one &quot;simple install&quot; grew to an extremely large TODO list item?
Yeah, you might as well pick the features you need and implement those parts
yourself, in an easily manageable fashion. At least that's my conclusion.</p>
<p>Though I probably won't manage to make a frontend as nice as ownCloud's...</p>

    </main>
  </body>
</html>
