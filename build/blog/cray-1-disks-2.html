<!doctype html>
<html lang="en">
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <meta name="Viewport" content="width=device-width,initial-scale=1,maximum-scale=1.0">
    <meta name="Description" content="Homepage of Richard Wossal. Weeks of hacking can save you hours of planning.">
    <title>Playing with Cray-1 Disks, Part 2 | r-wos.org</title>
    <style>

.terminal .clipboard {
 position:absolute;
 bottom:0;
 left:0;
 opacity:0.01;
 filter:alpha(opacity = 0.01);
 filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0.01);
 width:2px;
}
.cmd > .clipboard {
 position:fixed;
}
.terminal {
 padding:10px;
 position:relative;
 overflow:hidden;
}
.cmd {
 padding:0;
 margin:0;
 height:1.3em;
}
.terminal .terminal-output div div,
.terminal .prompt {
 display:block;
 line-height:14px;
 height:16px;
}
.terminal {
 font-family:FreeMono,monospace;
 color:#33dd33;
 background-color:#000f00;
 font-size:14px;
 line-height:16px;
}
.terminal .terminal-output div span {
 display:inline-block;
}
.terminal .cmd span {
 display:inline-block;
}
.terminal .cmd span.inverted {
 background-color:#33dd33;
 color:#000f00;
}
.terminal .terminal-output div div::-moz-selection,
.terminal .terminal-output div span::-moz-selection {
 background-color:#33dd33;
 color:#000f00;
}
.terminal .terminal-output div div::selection,
.terminal .terminal-output div span::selection,
.terminal .cmd > span::selection,
.terminal .prompt span::selection {
 background-color:#33dd33;
 color:#000f00;
}
.terminal .terminal-output div.error,
.terminal .terminal-output div.error div {
 color:#33dd33;
}
.tilda {
 position:fixed;
 top:0;
 left:0;
 width:100%;
 z-index:1100;
}
.clear {
 clear:both;
}
.terminal a {
 color:#ccff66;
}
.terminal a:hover {
 color:#ccff66;
}
body {
 font-family:Helvetica,Arial,sans-serif;
 font-size:11pt;
 line-height:1.5em;
 padding:0.5em;
 margin:0em;
 color:#33dd33;
 background-color:#000f00;
}
main {
 max-width:50em;
 margin-left:auto;
 margin-right:auto;
}
#footer,
#footer * {
 text-align:center;
 font-size:9pt;
 color:#226622;
}
#footer > a {
 color:#226622;
 text-decoration:underline;
}
h1,
h2,
h3,
h4 {
 color:#66ff66;
 line-height:1em;
 text-align:center !important;
 font-family:Georgia,serif;
 font-weight:normal;
}
a {
 color:#ccff66;
 text-decoration:none;
}
a img {
 display:inline-block;
 border:none;
}
a:hover {
 color:#000f00 ! important;
 background-color:#ffff00;
 border-radius:5px 5px 5px 5px;
 box-shadow:0px 0px 5px 4px #ffff00;
}
a:visited {
 color:#aaaa00;
}
nav {
 font-size:10pt;
 text-align:center;
}
.header {
 text-align:center !important;
}
h1 {
 font-size:16pt;
 border-top:1pt solid #66aa66;
 padding-top:0.25em;
 margin-top:1em;
 display:inline-block;
}
hr {
 border-style:none;
 width:50%;
 height:0pt;
 border-top:2pt solid #339933;
}
dl {
 display:inline-block;
}
dt {
 padding-top:1em;
 font-size:90%;
}
dt:first-letter {
 font-size:110%;
}
dd {
 padding-left:0.5em;
}
dd .descr {
 margin:0pt;
 margin-left:3em;
 margin-bottom:0.5em;
 padding 0pt;
}
.block {
 margin:1em;
 padding:4em;
 padding-top:1.5em;
 padding-bottom:2em;
 border-top:2pt solid #339933;
 border-bottom:2pt solid #339933;
 border-radius:2em;
 text-align:center;
}
.block * {
 text-align:left;
}
input[type=text],
textarea {
 color:#33dd33;
 background-color:#003f00;
 border:2pt solid #003f00;
 border-radius:0.25em;
}
input[type=text]:focus,
textarea:focus {
 border-top:2pt solid #339933;
 border-bottom:2pt solid #339933;
}
input[type=button],
input[type=submit] {
 color:#33dd33;
 background-color:#003f00;
 border-radius:0.25em;
 border:2pt solid #339933;
}
input[type=button]:hover,
input[type=submit]:hover {
 color:#000f00;
 background-color:#ffff00;
 border:2pt solid #ffff00;
 box-shadow:0px 0px 5px 4px #ffff00;
}
.nav-prev {
 float:left;
 font-size:small;
}
.nav-next {
 float:right;
 font-size:small;
}
@media (max-width:500px) {
 .block {
  padding-left:0em;
  padding-right:0em;
 }
 .nav-prev,
 .nav-next {
  float:none;
 }
}
 
 
    </style>
  </head>
  <body>
    <nav>
      <img style="vertical-align: middle" src="/media/disk.gif">
      <a href="/">Home</a> -
      <a href="/blog/">Blog</a> -
      <a href="/feed.xml">RSS</a> -
      <a href="/hacks/">Hacks</a> -
      <a href="/about">About</a>
    </nav>
    <main>
      <h1>Playing with Cray-1 Disks, Part 2</h1>
      <p><b><time datetime="2013-04-11 00:00:00 &#43;0000 &#43;0000">2013-04-11 00:00:00 &#43;0000 &#43;0000</time></b></p>
      <p><small>(<a href="http://r-wos.org/blog/cray-1-disks">part 1</a>)</small></p>
<p>Nothing ground-breaking to report, yet - but I'm having a lot of
fun so I thought I might as well blog about it.</p>
<p>Today (well, actually yesterday, it's 3:30am...) I've read the Cray Assembly Language
manual I linked last time.</p>
<p>It not only describes the architecture and instructions of the Cray-1 but also
the binary output format of the assembler. Unfortunately, nothing on the two disks
actually has that format, as far as I can tell.</p>
<p>The only thing on the disks that seems to match the manual are the word-sized program
names (the Cray-1 has 64-bit words). There's also no sign of the date and time strings
the manual describes. So, what I thought to be an easy vector to extract the machine code
doesn't really work.</p>
<p>However, others have already worked out the file format for the Cray OS disk
(thought it only really works for what is basically the boot section of the
disk, but maybe that's because of data corruptions).
I'm planning to write a small disassembler and try and see if I can find at least
some code that makes sense.</p>
<p>I don't really know what I'm doing, to be honest, which is probably what makes
it so much fun. :-)</p>
<p>The assembler manual contains a lot of interesting stuff I can't really explain
myself with my limited knowledge of 1970s batch computing.
For once, the assembler input is described in terms of punch cards, but there's also a
section that describes the invocation of the assembler in what looks like a CP/M like
syntax (assuming the '/X' switch syntax comes from CP/M, I only know it from DOS):</p>
<blockquote>
<p><code>CAL Z</code><br>
causes assembly of CAL source file <code>Z</code>, producing an absolute binary file
called <code>Z.SV</code><br>
<code>CAL/N/L A</code><br>
causes assembly of file <code>A</code>, producing as output a listing file <code>A.LS</code>.</p>
</blockquote>
<p>On what kind of machine does the assembler run? Probably not directly on the
Cray, I imagine. And if that machine has a command prompt sophisticated enough
to specify flags, why doesn't it also have a simple line editor? How did you
compute, strange people from the 70s? I have no clue!
(I feel I should know more about the whole thing, this was only 40 years ago...).</p>
<p>Oh, and the assembler has apparently 5 error messages: <code>O</code>, <code>L</code>, <code>D</code>, <code>U</code>, and
<code>R</code>. That are three more than <code>ed(1)</code> has, but still... In some ways, it seems,
these were simpler times.</p>
<p>From the ASCII strings it seems that there's quite a bit of fun stuff on the
Cray OS disk - a source code editor, a complete on-line help system for
Cray OS and IOS (which, if I understood it correctly, is basically the Cray's
BIOS, only that it also has its own processor) - oh, and this:</p>
<pre><code>&amp;*****************************
&amp;* Leading Edge Technologies *
&amp;*****************************
&amp;Preventive Maintenance (TISM):
&amp;Mon 07:15 - 09:15, Tue 17:00 - 21:00, Fri 07:15 - 09:15.
&amp;*************************************
6LTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTT
&amp;Mon 07:15 - 09:15, Tue 17:00 - 21:00, Fri 07:15 - 09:15.
&amp;******************************************************
&amp;* This is M-M-Max MP, here ... PARTY, PARTY, PARTY ! *
&amp;******************************************************
%*****************************************************
%* This is M-M-Max MP, here ... Hey, go home ... NOW *
%*****************************************************
%*****************************************************
%* This is M-M-Max MP, here ... sorry, no NEWS today *
%*****************************************************
</code></pre>
<p>Happy Hacking and good night!</p>

    </main>
  </body>
</html>
